<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Learn SCSS</title>
    <link rel="stylesheet" href="./css/style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <style>
        form {
            outline: 1px solid rgb(77, 77, 77);
            padding: .5rem;
        }

        a.showLink {
            margin: 1rem 0;

            &:after {
                content: "(GET method: " attr(href) ")";
                font-weight: bold;
                color: rgb(222, 75, 75);
            }
        }

        .bg-pink {
            background-color: rgba(248, 203, 255, 0.748);

            &:hover {
                background-color: rgba(255, 136, 239, 0.827);
            }
        }
    </style>
</head>

<body>
<div class="container pt-4">
    <h1>Đăng kí sổ tiết kiệm</h1>
    <a href="http://localhost:8080/api/customer" class="showLink btn bg-pink" target="_blank">
        Xem danh sách sổ Tiết kiệm</a>
    <form action="http://localhost:8080/api/customer" method="POST">
        <legend>POST method</legend>
        <label for="">Mã số:</label>
        <input type="text" name="makh" required>
        <label for="name">Khách hàng: </label>
        <input type="text" name="name" required>
        <label for="maso">Địa chỉ:</label>
        <input type="text" name="address" required>
        <br>
        <label for="money">Số tiền gửi</label>
        <input type="range" name="money" min="100000" max="2000000" step="100000" id="moneyss" value="100000">
        <span class="show-rangess"></span>
        <br>
        <label for="takeout">Loại tiết kiệm: </label>
        <select name="type">
            <option value="0" selected>Không kỳ hạn</option>
            <option value="2">3 tháng</option>
            <option value="1">6 tháng</option>
        </select>
        <label for="">CMND</label>
        <input type="text" name="cmnd" required>
        <label for="">Ngày mở sổ: </label>
        <input type="date" name="dateOpened" required>
        <button type="submit" class="btn btn-primary">Đăng kí</button>
    </form>
    <p class="mt-4 text-danger fw-bold d-inline-block">Xóa khách hàng có makh chỉ định: </p>
    <label for="">Nhập makh: </label>
    <input type="number" id="delete-makh" required min="1">
    <button class="btn btn-danger" id="delete-btn">Delete</button>
    <hr><br>

    <h1>Gửi tiền</h1>
    <a href="http://localhost:8080/api/goitien" class="showLink btn bg-pink" target="_blank">
        Xem danh sách gửi tiền</a>
    <form action="http://localhost:8080/api/goitien" method="POST">
        <legend>POST method</legend>
        <label for="name">Khách hàng: </label>
        <input type="text" name="name" required>
        <label for="maso">Mã sổ:</label>
        <input type="text" name="maso" required>
        <br>
        <label for="takeout">Ngày gởi</label>
        <input type="date" name="dateSent" required>
        <label for="money">Số tiền gửi</label>
        <input type="range" name="money" min="10000" max="2000000" step="10000" id="moneys" value="50000">
        <span class="show-ranges"></span>
        <button type="submit" class="btn btn-success">Gởi tiền</button>
    </form>
    <br>
    <hr>
    <h1>Rút tiền</h1>
    <a href="http://localhost:8080/api/ruttien" class="showLink btn bg-pink" target="_blank">
        Xem danh sách rút tiền</a>
    <form action="http://localhost:8080/api/ruttien" method="POST">
        <legend>POST method</legend>
        <label for="name">Khách hàng: </label>
        <input type="text" id="name" name="name" required>
        <label for="maso">Mã sổ:</label>
        <input type="text" name="maso" id="maso" required>
        <br>
        <label for="takeout">Ngày rút</label>
        <input type="date" name="dateTakeOut" id="takeout" required>
        <label for="money">Số tiền rút</label>
        <input type="range" name="money" id="money" min="10000" max="2000000" step="10000" value="50000">
        <span class="show-range"></span>
        <button type="submit" class="btn btn-warning">Rút tiền</button>
    </form>
    <br>
    <hr>
    <h1>Danh sách sổ tiết kiệm</h1>
    <a href="http://localhost:8080/api/tracuu" class="showLink btn bg-pink">Hiển thị</a>
    <a href="http://localhost:8080/api/tracuus?page=0&per_page=3" class="showLink btn bg-pink">
        Hiển thị có phân trang</a>
    <p>* page là trang hiện tại bắt đầu từ 0(mặc định là 0), per_page là số item trong mỗi page(mặc định là 2),
        total_pages là số page</p>
    <hr><br>
    <h1>Danh thu hoạt động ngày:</h1>
    <form action="http://localhost:8080/api/doanhthuDaily" method="POST">
        <legend>POST method</legend>
        <label for="">Chọn ngày: </label>
        <input type="date" name="date" required>
        <button type="submit" class="btn btn-info">Tra cứu</button>
    </form>
    <hr><br>
    <h1>Báo Cáo Mở/Đóng Sổ Tháng</h1>
    <form action="http://localhost:8080/api/report" method="GET">
        <legend>POST method</legend>
        <label for="name">Loại tiết kiệm: </label>
        <select name="type" id="" required>
            <option value="0">Không kỳ hạn</option>
            <option value="1">3 tháng</option>
            <option value="2">6 tháng</option>
        </select>
        <label for="takeout">Ngày rút</label>
        <input type="month" name="monthYear" required>
        <button class="btn btn-secondary" type="submit">Báo cáo</button>
    </form>
    <hr><br>
    <h1>Change regulations</h1>
    <a href="http://localhost:8080/api/kyhan" class="btn showLink bg-pink m-2">Danh sách kỳ hạn</a>
    <table class="table table-bordered regulations">
        <tr>
            <th>STT</th>
            <th>Tên kỳ hạn</th>
            <th>Action</th>
            <th width="50%">Note</th>
        </tr>
        <tr>
            <td>1</td>
            <td>Không kỳ hạn</td>
            <td>
                <a href="#" class="btn btn-info">Edit</a>
            </td>
            <td>Không nên delete kỳ hạn này bởi vì thêm lại rất mệt hehe, edit thì oke</td>
        </tr>
        <tr>
            <td>2</td>
            <td>3 tháng</td>
            <td>
                <a href="#" class="btn btn-info">Edit</a>
            </td>
            <td>Không nên delete kỳ hạn này bởi vì thêm lại rất mệt hehe, edit thì oke</td>
        </tr>
        <tr>
            <td>3</td>
            <td>6 tháng</td>
            <td>
                <a href="#" class="btn btn-info">Edit</a>
            </td>
            <td>Không nên delete kỳ hạn này bởi vì thêm lại rất mệt hehe, edit thì oke</td>
        </tr>
        <tr>
            <td>4</td>
            <td>10 tháng</td>
            <td>
                <a href="#" class="btn btn-info">Edit</a>
                <a href="#" class="btn btn-danger delete">Delete</a>
            </td>
            <td>Không nên delete kỳ hạn này bởi vì thêm lại rất mệt hehe, edit thì oke</td>
        </tr>
    </table>
    <!-- Button trigger modal -->
    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#staticBackdrop">
        Thêm kỳ hạn
    </button>

    <!-- Modal -->
    <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
         aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog  modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="staticBackdropLabel">Thêm
                        kỳ hạn</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form action="http://localhost:8080/api/kyhan" method="POST">
                        <label for="">Tên kỳ hạn:</label>
                        <input type="text" name="name" required>
                        <br>
                        <label for="">Số tháng kỳ hạn:</label>
                        <input type="number" name="month" min="1" value="1">
                        <br>
                        <label for="">Lãi suất: </label>
                        <input type="number" min="0.0001" step="0.0001" value="0.0055" name="laisuat">
                        <br>
                        <label for="">Thời gian gởi tối thiểu(đơn vị: ngày) :</label>
                        <input type="number" name="ngayDcGui" min="1" value="10">
                        <br>
                        <label for="">Số tiền gửi tối thiểu: </label>
                        <input type="number" name="min_deposit" step="10000" min="10000" value="100000">
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                            <button type="submit" class="btn btn-primary">Add</button>
                        </div>
                    </form>
                </div>

            </div>
        </div>
    </div>
    <hr><br>
    <div style="height: 70vh;"></div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"
        integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script>
    $(() => {
        const $range = $("input#money");
        const $showRange = $("span.show-range");
        $showRange.text($range.val())
        $range.on("input change", function (e) {
            $showRange.text(e.target.value);
        })
        const $ranges = $("input#moneys");
        const $showRanges = $("span.show-ranges");
        $showRanges.text($ranges.val())
        $ranges.on("input change", function (e) {
            $showRanges.text(e.target.value);
        })
        const $rangess = $("input#moneyss");
        const $showRangess = $("span.show-rangess");
        $showRangess.text($rangess.val())
        $rangess.on("input change", function (e) {
            $showRangess.text(e.target.value);
        })

        // DELETE Customer by makh
        $("#delete-btn").click(function () {
            // Send an Ajax request to delete the customer with id 4
            const makh = parseInt($("#delete-makh").val()) | 0;
            const isConfirmed = confirm(`Are you sure you want to delete customer has makh: ${makh}`);
            if (isConfirmed && makh != 0) {
                $.ajax({
                    type: "DELETE",
                    url: `http://localhost:8080/api/customer/${makh}`,
                    success: function (data) {
                        alert("Delete successful! makh " + makh);
                    },
                    error: function (e) {
                        alert("Error deleting customer has makh " + makh + " lets check list customer to see")
                    }
                });
            } else if (isConfirm && makh == 0) {
                alert("Mã khách hàng makh must not be empty");
            }

        });

        const $regulations = $("form.regulations");
    });
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>
</body>

</html>